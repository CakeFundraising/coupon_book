(function(){var e,t,n,i,o,r,a;null==CakeCouponBook.coupon_books&&(CakeCouponBook.coupon_books={}),null==(n=CakeCouponBook.coupon_books).templates&&(n.templates={}),i=function(){$(".overlay-img").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")})},e=function(){window.location.search.indexOf("purchased=1")>-1&&$("#after_purchase_modal").modal("show")},t=function(){$(window).height()+1200<$(document).height()&&$("#top-link-block").removeClass("hidden").affix({offset:{top:1200}})},o=function(){var e,t,n,i;t=$(".book-nav"),i=t.find(".nav-section"),e=t.find(".buy_button_section"),n=t.find(".nav-about-link"),e.hide(),t.affix({offset:{top:t.offset().top}}),t.on("affixed.bs.affix",function(){i.removeClass("col-md-12").addClass("col-md-9"),e.show()}),t.on("affix-top.bs.affix",function(){e.hide(),i.removeClass("col-md-9").addClass("col-md-12")}),t.find("a.book-nav-link").each(function(){$(this).click(function(){$("html, body").animate({scrollTop:$("#coupons.green").offset().top},500)})})},r=function(){var e,t;t=$(".book-nav ul.nav"),e=t.find("li a.book-nav-link"),e.each(function(){var e,n,i;i=$(this),i.removeAttr("href").removeAttr("data-toggle"),n=i.data("cid"),e=$("#"+n),i.off("click").click(function(){t.find("li").each(function(){$(this).removeClass("active")}),i.closest("li").addClass("active"),$("html, body").animate({scrollTop:e.offset().top-$(".book-nav").height()},500)})})},a=function(){var e,t,n;t=$("#remote-items"),e=t.find("#see-more-link"),n=t.find("#spinner"),CakeCouponBook.coupon_books.templates.dealSeeAllLink(),e.click(function(){n.removeClass("hidden"),$(this).hide()}),e.on("ajax:success",function(e,n){t.html(n),CakeCouponBook.expander(),r()}).on("ajax:error",function(){n.hide(),e.show(),alert("There was an error, please reload this page and try again.")})},CakeCouponBook.coupon_books.templates.dealSeeAllLink=function(){var e,t,n;n=$("#remote-items"),t=n.find(".see-more-box"),e=n.find("#see-more-link"),t.click(function(){e.click()})},CakeCouponBook.coupon_books.templates.compact=function(){i(),e(),t(),o(),a(),CakeCouponBook.subscriptors.validation()}}).call(this);