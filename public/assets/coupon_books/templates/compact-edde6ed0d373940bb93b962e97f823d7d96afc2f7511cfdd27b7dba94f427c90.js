!function o(t,n,i){function e(s,l){if(!n[s]){if(!t[s]){var r="function"==typeof require&&require;if(!l&&r)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(o){var n=t[s][1][o];return e(n?n:o)},f,f.exports,o,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)e(i[s]);return e}({1:[function(o){(function(){var t,n,i,e,a,s;null==CakeCouponBook.coupon_books&&(CakeCouponBook.coupon_books={}),null==(e=CakeCouponBook.coupon_books).templates&&(e.templates={}),t=o("./categories_nav.coffee"),a=function(){$(".overlay-img").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")})},n=function(){window.location.search.indexOf("purchased=1")>-1&&$("#after_purchase_modal").modal("show")},i=function(){$(window).height()+1200<$(document).height()&&$("#top-link-block").removeClass("hidden").affix({offset:{top:1200}})},s=function(){(new t).init()},CakeCouponBook.coupon_books.templates.dealSeeAllLink=function(){(new t).dealSeeAll()},CakeCouponBook.coupon_books.templates.compact=function(){a(),n(),i(),s(),CakeCouponBook.subscriptors.validation(),CakeCouponBook.consumers.validation()}}).call(this)},{"./categories_nav.coffee":2}],2:[function(o,t){var n;n=function(){function o(){this.nav=$(".book-nav"),this.navUl=this.nav.find("ul.nav"),this.navLinks=this.navUl.find("li a.book-nav-link"),this.navSection=this.nav.find(".nav-section"),this.buttonSection=this.nav.find(".buy_button_section"),this.navAboutLink=this.nav.find(".nav-about-link"),this.loadTarget=$("#remote-items"),this.loadAllButton=this.loadTarget.find("#see-more-link"),this.dealLinks=this.loadTarget.find(".see-more-box"),this.spinner=this.loadTarget.find("#spinner")}return o.prototype.showButton=function(){this.buttonSection.show()},o.prototype.hideButton=function(){this.buttonSection.hide()},o.prototype.scrollNav=function(o){var t,n,i;i=this,n=o.data("cid"),t=$("#"+n),o.removeAttr("href").removeAttr("data-toggle"),o.off("click").click(function(){i.navUl.find("li").each(function(){$(this).removeClass("active")}),o.closest("li").addClass("active"),$("html, body").animate({scrollTop:t.offset().top-i.nav.height()},500)})},o.prototype.seeAll=function(){var o;o=this,this.loadAllButton.click(function(){o.spinner.removeClass("hidden"),$(this).hide()}),this.loadAllButton.on("ajax:success",function(t,n){o.loadTarget.html(n),CakeCouponBook.expander(),o.navLinks.each(function(){o.scrollNav($(this))})}).on("ajax:error",function(){o.spinner.hide(),o.loadAllButton.show(),alert("There was an error, please reload this page and try again.")})},o.prototype.dealSeeAll=function(){var o;o=this,this.dealLinks.click(function(){o.loadAllButton.click()})},o.prototype.initNavScrolling=function(){var o;o=this,this.navLinks.each(function(){$(this).click(function(){$("html, body").animate({scrollTop:$("#coupons.green").offset().top},500)})})},o.prototype.setAffixes=function(){var o;o=this,this.hideButton(),this.nav.affix({offset:{top:o.nav.offset().top}}),this.nav.on("affixed.bs.affix",function(){o.navSection.removeClass("col-md-12").addClass("col-md-9"),o.showButton()}),this.nav.on("affix-top.bs.affix",function(){o.navSection.removeClass("col-md-9").addClass("col-md-12"),o.hideButton()})},o.prototype.loadFirstCategory=function(){this.navLinks.first().click()},o.prototype.init=function(){this.setAffixes(),this.seeAll(),this.dealSeeAll(),this.loadFirstCategory(),this.initNavScrolling()},o}(),t.exports=n},{}]},{},[1]);