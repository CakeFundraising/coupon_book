(function(){var o,n,e,a,i,t,s;null==CakeCouponBook.coupon_books&&(CakeCouponBook.coupon_books={}),null==(e=CakeCouponBook.coupon_books).templates&&(e.templates={}),a=function(){$(".overlay-img").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")})},o=function(){window.location.search.indexOf("purchased=1")>-1&&$("#after_purchase_modal").modal("show")},n=function(){$(window).height()+1200<$(document).height()&&$("#top-link-block").removeClass("hidden").affix({offset:{top:1200}})},i=function(){var o,n,e,a;e=$(".book-nav"),a=e.find(".nav-section"),n=e.find(".buy_button_section"),o=$("#learn-more-banner"),e.affix({offset:{top:400}}),e.find("a.book-nav-link").each(function(){$(this).click(function(){$("html, body").animate({scrollTop:300},500)})})},t=function(){var o,n;n=$(".book-nav ul.nav"),o=n.find("li a"),o.each(function(){var o,e,a;a=$(this),a.removeAttr("href").removeAttr("data-toggle"),e=a.data("cid"),o=$("#"+e),a.off("click").click(function(){n.find("li").each(function(){$(this).removeClass("active")}),a.closest("li").addClass("active"),$("html, body").animate({scrollTop:o.offset().top-$(".book-nav").height()},500)})})},s=function(){var o,n,e,a;e=$("#remote-items"),n=e.find(".see-more-box"),o=e.find("#see-more-link"),a=e.find("#spinner"),CakeCouponBook.coupon_books.templates.dealSeeAllLink(),o.click(function(){a.removeClass("hidden"),$(this).hide()}),o.on("ajax:success",function(o,n){e.html(n),CakeCouponBook.expander(),t()}).on("ajax:error",function(){a.hide(),o.show(),alert("There was an error, please reload this page and try again.")})},CakeCouponBook.coupon_books.templates.dealSeeAllLink=function(){var o,n,e;e=$("#remote-items"),n=e.find(".see-more-box"),o=e.find("#see-more-link"),n.click(function(){o.click()})},CakeCouponBook.coupon_books.templates.commercial=function(){a(),o(),n(),i(),s(),CakeCouponBook.subscriptors.validation(),CakeCouponBook.consumers.validation()}}).call(this);