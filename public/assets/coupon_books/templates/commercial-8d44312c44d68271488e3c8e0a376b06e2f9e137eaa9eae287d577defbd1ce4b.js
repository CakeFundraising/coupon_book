(function(){var o,e,n,i,a,t,s;null==CakeCouponBook.coupon_books&&(CakeCouponBook.coupon_books={}),null==(n=CakeCouponBook.coupon_books).templates&&(n.templates={}),i=function(){$(".overlay-img").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")})},o=function(){window.location.search.indexOf("purchased=1")>-1&&$("#after_purchase_modal").modal("show")},e=function(){$(window).height()+1200<$(document).height()&&$("#top-link-block").removeClass("hidden").affix({offset:{top:1200}})},a=function(){var o,e,n,i;n=$(".book-nav"),i=n.find(".nav-section"),e=n.find(".buy_button_section"),o=$("#learn-more-banner"),n.affix({offset:{top:400}}),n.find("a.book-nav-link").each(function(){$(this).click(function(){$("html, body").animate({scrollTop:300},500)})})},t=function(){var o,e;e=$(".book-nav ul.nav"),o=e.find("li a"),o.each(function(){var o,n,i;i=$(this),i.removeAttr("href").removeAttr("data-toggle"),n=i.data("cid"),o=$("#"+n),i.off("click").click(function(){e.find("li").each(function(){$(this).removeClass("active")}),i.closest("li").addClass("active"),$("html, body").animate({scrollTop:o.offset().top-$(".book-nav").height()},500)})})},s=function(){var o,e,n,i;n=$("#remote-items"),e=n.find(".see-more-box"),o=n.find("#see-more-link"),i=n.find("#spinner"),CakeCouponBook.coupon_books.templates.dealSeeAllLink(),o.click(function(){i.removeClass("hidden"),$(this).hide()}),o.on("ajax:success",function(o,e){n.html(e),t()}).on("ajax:error",function(){i.hide(),o.show(),alert("There was an error, please reload this page and try again.")})},CakeCouponBook.coupon_books.templates.dealSeeAllLink=function(){var o,e,n;n=$("#remote-items"),e=n.find(".see-more-box"),o=n.find("#see-more-link"),e.click(function(){o.click()})},CakeCouponBook.coupon_books.templates.commercial=function(){i(),o(),e(),a(),s(),CakeCouponBook.subscriptors.validation()}}).call(this);